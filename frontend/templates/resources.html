<!DOCTYPE html>
<html>
<head>
  <title>Resources</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body style="background-color:#f8fafc;">

<!-- Navbar -->
<nav class="navbar navbar-dark" style="background-color:#4f46e5;">
  <div class="container d-flex align-items-center">

    <!-- Back button (left) -->
    <a href="/" class="btn btn-outline-light btn-sm">
      ← Back
    </a>

    <!-- Title (center) -->
    <span class="navbar-brand mx-auto fw-bold">
      Event Scheduler
    </span>

  </div>
</nav>

<!-- Page Content -->
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-5">

      <div class="card shadow-sm">
        <div class="card-body">

          <h4 class="text-center mb-4">Create Resource</h4>

          <label class="form-label">Resource Name</label>
          <input id="name" class="form-control mb-3" placeholder="Enter resource name">

          <label class="form-label">Resource Type</label>
          <select id="type" class="form-control mb-3">
            <option value="room">Room</option>
            <option value="instructor">Instructor</option>
            <option value="equipment">Equipment</option>
          </select>

          <button
            class="btn w-100 text-white"
            style="background-color:#4f46e5;"
            onclick="createResource()">
            Create Resource
          </button>

          <p id="msg" class="mt-3 text-center fw-semibold"></p>

        </div>
      </div>

    </div>
  </div>
</div>

<script>
function createResource() {
  const nameInput = document.getElementById("name").value.trim();
  const typeInput = document.getElementById("type").value;

  if (!nameInput) {
    msg.innerText = "❌ Resource name is required";
    msg.style.color = "#dc2626";
    return;
  }

  fetch('/resources/', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      name: nameInput,
      type: typeInput
    })
  })
  .then(async response => {
    const data = await response.json();
    if (!response.ok) {
      throw new Error(data.error);
    }
    return data;
  })
  .then(data => {
    msg.innerText = `✅ Resource created successfully! (Resource ID: ${data.resource_id})`;
    msg.style.color = "#16a34a";

    document.getElementById("name").value = "";
  })
  .catch(err => {
    msg.innerText = err.message;
    msg.style.color = "#dc2626";
  });
}
</script>

</body>
</html>
